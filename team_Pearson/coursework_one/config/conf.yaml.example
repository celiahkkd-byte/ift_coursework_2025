# conf.yaml.example â€” Project Configuration Template
#
# SETUP INSTRUCTIONS:
#   1. Copy this file and rename it to: conf.yaml
#   2. conf.yaml is automatically ignored by git (it's in .gitignore)
#   3. Set Alpha Vantage key in .env via ALPHA_VANTAGE_API_KEY

# Pipeline Settings
pipeline:
  frequency: daily           # How often to run: daily, weekly, monthly, quarterly, annual
  backfill_years: 5          # Number of years of historical data to fetch
  company_limit: 20          # Max companies to process (null = no limit, useful for testing)
  enabled_extractors:        # Pluggable extractor switches
    - source_a
    - source_b               # run source_a + source_b by default

# Universe filters
universe:
  country_allowlist: ["US", "GB", "CA", "FR", "DE"]

# Logging
logging:
  run_log_path: logs/pipeline_runs.jsonl

# Alpha Vantage key is environment-only (.env / ALPHA_VANTAGE_API_KEY).

# Source A provider strategy
source_a:
  primary_source: alpha_vantage
  enable_yfinance_fallback: true
  use_cache: true

source_b:
  strict_time: false          # true => drop rows with missing/invalid time_published

# Shared symbol filtering policy (applies to all sources unless overridden)
symbol_filter:
  skip_suffix_symbols: true
  symbol_regex_allow: "^[A-Z0-9]+$"

# Provider-aware routing
routing:
  av_only_if_regex: "^[A-Z0-9]+$"
  yf_for_suffixes: [".L", ".TO", ".PA", ".DE"]
  history_ticker_policy: "skip"      # skip | try_yf_only
  history_blocklist: ["ABC", "ADS", "FB", "ATVI", "ABMD", "CELG"]
