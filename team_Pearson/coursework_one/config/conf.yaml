# conf.yaml â€” Project Configuration File

# Pipeline Settings
pipeline:
  frequency: daily           # How often to run: daily, weekly, monthly, quarterly, annual
  backfill_years: 5          # Number of years of historical data to fetch
  company_limit: 20          # Max companies to process (null = no limit, useful for testing)
  enabled_extractors:        # Stage toggles for pluggable extractors
    - source_a
    - source_b               # default runs both extractors

# Universe filters
universe:
  country_allowlist: ["US", "GB", "CA", "FR", "DE"]

# Logging 
logging:
  run_log_path: logs/pipeline_runs.jsonl

# Alpha Vantage key is loaded from environment (.env), not from this file.

# Source A provider strategy
source_a:
  primary_source: alpha_vantage
  enable_yfinance_fallback: true
  use_cache: true

source_b:
  strict_time: false          # true => drop rows with missing/invalid time_published

# Shared symbol filtering policy (applies to all sources unless overridden)
symbol_filter:
  skip_suffix_symbols: true
  symbol_regex_allow: "^[A-Z0-9]+$"

# Provider-aware routing
routing:
  av_only_if_regex: "^[A-Z0-9]+$"
  yf_for_suffixes: [".L", ".TO", ".PA", ".DE"]
  history_ticker_policy: "skip"      # skip | try_yf_only
  history_blocklist: ["ABC", "ADS", "FB", "ATVI", "ABMD", "CELG"]
